# Support VLOCATION (RFC9073)

Lets add support for "Event Publishing Extensions to iCalendar"
At least the basics.
This is a replacement for VVENUE, which is from a discontinued draft that was never release <https://datatracker.ietf.org/doc/html/draft-norris-ical-venue-01>

## MCP Tools

you can use the icalendar-validator mcp server to verify example calendars. Missing version and PRODID and line endings are acceptable.

## Stages

### 1. Lets get familiar with <https://www.rfc-editor.org/rfc/rfc9073>.

List out all the necessary new components, parameters, properties that need to be added.
Find out if there is syntax we don't yet support.

Are there any dependencies on other RFCs that we have not implemented yet?
Should we implement those RFC first?

### 2. Prepare the testing environment.
Create a fixture that demonstrates the necessary properties and parameters that can serve as a test for the parser as well.
Take this straight from the RFC if possible

### 3. Implement the module
Implement the module with the necessary components, parameters, and properties.
Settle for a distinct subset first. Put the rest in a markdown todo-list in the module documentation.
Test the implementation with the fixture created in step 2.

### 4. Mark the VVENUE types as deprecated
mark types and methods that stem from `draft-norris-ical-venue-01` as `#[deprecated]`

## Style

### References to specification
The documentation comment of each item MUST contain a link to the specification and corresponding subsection.

## Implementation Progress

Current stage: 3 (we have a fixture)

## RFC9073 Implementation Checklist

### Components to Add
- [x] PARTICIPANT component
- [x] VLOCATION component
- [x] VRESOURCE component

### Properties to Add
- [x] LOCATION-TYPE property
- [x] PARTICIPANT-TYPE property
- [x] RESOURCE-TYPE property
- [x] CALENDAR-ADDRESS property
- [x] STRUCTURED-DATA property
- [x] STYLED-DESCRIPTION property

### Parameters to Add
- [x] ORDER parameter
- [x] SCHEMA parameter
- [x] DERIVED parameter

### Syntax/Parsing Support
- [x] Multiple instances of the same property with parameters (e.g., ORDER)
- [~] Multiple STYLED-DESCRIPTION with DERIVED handling
      - Multi-instance support is present, but RFC9073-specific logic for DERIVED fallback/priority is not yet implemented.
- [~] STRUCTURED-DATA value types (TEXT, BINARY, URI) and required parameters
      - Properties and parameters are stored, but there is no type-specific validation or logic yet.
- [x] Nested components (e.g., PARTICIPANT containing VLOCATION/VRESOURCE)

### Registry/Value List Support
- [ ] PARTICIPANT-TYPE registry values (ACTIVE, INACTIVE, SPONSOR, CONTACT, BOOKING-CONTACT, EMERGENCY-CONTACT, PUBLICITY-CONTACT, PLANNER-CONTACT, PERFORMER, SPEAKER)
- [ ] RESOURCE-TYPE registry values (PROJECTOR, ROOM, REMOTE-CONFERENCE-AUDIO, REMOTE-CONFERENCE-VIDEO)
- [ ] LOCATION-TYPE values from RFC4589

### Dependencies/References
- [ ] Reference RFC5545, RFC7986, RFC6350, RFC4589 as needed for semantics and value lists

---

## Intentionally omitted

- `STYLED-DESCRIPTION` support is intentionally deferred. We will implement it later for all components where `DESCRIPTION` is allowed, as per RFC9073 Section 6.5.
